{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-516eebfe\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Name\"), /*#__PURE__*/_createElementVNode(\"th\")])], -1 /* HOISTED */));\nconst _hoisted_2 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_RouterLink = _resolveComponent(\"RouterLink\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [_createVNode(_component_RouterLink, {\n    to: `/category/create`,\n    class: \"nav-link\",\n    \"active-class\": \"active-link\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Добавить категорию \")]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", null, [_createElementVNode(\"table\", null, [_hoisted_1, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, category => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: category.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(category.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(category.name), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteCategory(category.id)\n    }, \"Удалить\", 8 /* PROPS */, _hoisted_2)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","_createVNode","_component_RouterLink","to","class","_hoisted_1","_createElementBlock","_Fragment","_renderList","$data","categories","category","key","id","_toDisplayString","name","onClick","$event","$options","deleteCategory","_hoisted_2"],"sources":["d:\\Programs\\OSPanel\\domains\\back-adil\\src\\views\\AdminCategories.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <RouterLink :to='`/category/create`' class=\"nav-link\" active-class=\"active-link\">\r\n      Добавить категорию\r\n    </RouterLink>\r\n  </div>\r\n  <div>\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>Name</th>\r\n        <th></th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"category in categories\" :key=\"category.id\">\r\n        <td>{{ category.id }}</td>\r\n        <td>{{ category.name }}</td>\r\n        <td>\r\n          <button @click=\"deleteCategory(category.id)\">Удалить</button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      categories: [],\r\n    };\r\n  },\r\n  async created() {\r\n    try {\r\n      const response = await axios.get('/admin/categories');\r\n      this.categories = response.data;\r\n      console.log(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    async deleteCategory(categoryId) {\r\n      if (confirm('Вы уверены, что хотите удалить эту категорию?')) {\r\n        try {\r\n          await axios.delete(`/category/${categoryId}/delete`);\r\n          this.categories = this.categories.filter(cat => cat.id !== categoryId);\r\n          alert('Категория удалена');\r\n        } catch (error) {\r\n          console.error('Ошибка при удалении категории:', error);\r\n        }\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n  text-align: left;\r\n}\r\n\r\ntr:nth-child(even) {\r\n  background-color: #f2f2f2;\r\n}\r\n</style>"],"mappings":";;gEAQMA,mBAAA,CAMQ,gB,aALRA,mBAAA,CAIK,a,aAHHA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAS,M;;;;6DAXfA,mBAAA,CAIM,cAHJC,YAAA,CAEaC,qBAAA;IAFAC,EAAE,EAAE,kBAAkB;IAAEC,KAAK,EAAC,UAAU;IAAC,cAAY,EAAC;;sBAAc,MAEjF,C,iBAFiF,sBAEjF,E;;QAEFJ,mBAAA,CAmBM,cAlBJA,mBAAA,CAiBQ,gBAhBNK,UAMQ,EACRL,mBAAA,CAQQ,iB,kBAPRM,mBAAA,CAMKC,SAAA,QAAAC,WAAA,CANkBC,KAAA,CAAAC,UAAU,EAAtBC,QAAQ;yBAAnBL,mBAAA,CAMK;MAN+BM,GAAG,EAAED,QAAQ,CAACE;QAChDb,mBAAA,CAA0B,YAAAc,gBAAA,CAAnBH,QAAQ,CAACE,EAAE,kBAClBb,mBAAA,CAA4B,YAAAc,gBAAA,CAArBH,QAAQ,CAACI,IAAI,kBACpBf,mBAAA,CAEK,aADHA,mBAAA,CAA6D;MAApDgB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,cAAc,CAACR,QAAQ,CAACE,EAAE;OAAG,SAAO,iBAAAO,UAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}